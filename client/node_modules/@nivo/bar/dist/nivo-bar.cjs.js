"use strict";var e=require("@nivo/axes"),a=require("@nivo/core"),t=require("@react-spring/web"),i=require("react"),n=require("@nivo/annotations"),r=require("react/jsx-runtime"),l=require("@nivo/legends"),o=require("@nivo/colors"),d=require("@nivo/tooltip"),u=require("@nivo/scales"),s=require("d3-shape"),c=require("lodash/uniqBy");function h(){return h=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},h.apply(this,arguments)}function f(e,a){if(null==e)return{};var t,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],a.indexOf(t)>=0||(n[t]=e[t]);return n}var v,b=function(e){var a=e.bars,t=e.annotations,i=n.useAnnotations({data:a,annotations:t,getPosition:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},getDimensions:function(e){var a=e.height,t=e.width;return{width:t,height:a,size:Math.max(t,a)}}});return r.jsx(r.Fragment,{children:i.map((function(e,a){return r.jsx(n.Annotation,h({},e),a)}))})},g=function(e){var a=e.width,t=e.height,i=e.legends,n=e.toggleSerie;return r.jsx(r.Fragment,{children:i.map((function(e,i){var o,d=e[0],u=e[1];return r.jsx(l.BoxLegendSvg,h({},d,{containerWidth:a,containerHeight:t,data:null!=(o=d.data)?o:u,toggleSerie:d.toggleSerie&&"keys"===d.dataFrom?n:void 0}),i)}))})},m=["data"],x=function(e){var n,l=e.bar,o=l.data,u=f(l,m),s=e.style,c=s.borderColor,v=s.color,b=s.height,g=s.labelColor,x=s.labelOpacity,p=s.labelX,y=s.labelY,k=s.transform,S=s.width,C=e.borderRadius,L=e.borderWidth,w=e.label,V=e.shouldRenderLabel,T=e.isInteractive,M=e.onClick,B=e.onMouseEnter,W=e.onMouseLeave,I=e.tooltip,O=e.isFocusable,R=e.ariaLabel,j=e.ariaLabelledBy,E=e.ariaDescribedBy,P=a.useTheme(),F=d.useTooltip(),H=F.showTooltipFromEvent,A=F.showTooltipAt,D=F.hideTooltip,X=i.useMemo((function(){return function(){return i.createElement(I,h({},u,o))}}),[I,u,o]),Y=i.useCallback((function(e){null==M||M(h({color:u.color},o),e)}),[u,o,M]),q=i.useCallback((function(e){return H(X(),e)}),[H,X]),G=i.useCallback((function(e){null==B||B(o,e),H(X(),e)}),[o,B,H,X]),z=i.useCallback((function(e){null==W||W(o,e),D()}),[o,D,W]),N=i.useCallback((function(){A(X(),[u.absX+u.width/2,u.absY])}),[A,X,u]),K=i.useCallback((function(){D()}),[D]);return r.jsxs(t.animated.g,{transform:k,children:[r.jsx(t.animated.rect,{width:t.to(S,(function(e){return Math.max(e,0)})),height:t.to(b,(function(e){return Math.max(e,0)})),rx:C,ry:C,fill:null!=(n=o.fill)?n:v,strokeWidth:L,stroke:c,focusable:O,tabIndex:O?0:void 0,"aria-label":R?R(o):void 0,"aria-labelledby":j?j(o):void 0,"aria-describedby":E?E(o):void 0,onMouseEnter:T?G:void 0,onMouseMove:T?q:void 0,onMouseLeave:T?z:void 0,onClick:T?Y:void 0,onFocus:T&&O?N:void 0,onBlur:T&&O?K:void 0}),V&&r.jsx(t.animated.text,{x:p,y:y,textAnchor:"middle",dominantBaseline:"central",fillOpacity:x,style:h({},P.labels.text,{pointerEvents:"none",fill:g}),children:w})]})},p=["color","label"],y=function(e){var a=e.color,t=e.label,i=f(e,p);return r.jsx(d.BasicTooltip,{id:t,value:i.formattedValue,enableChip:!0,color:a})},k={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:y,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[],enableTotals:!1,totalsOffset:10},S=h({},k,{layers:["grid","axes","bars","totals","markers","legends","annotations"],barComponent:x,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),C=h({},k,{layers:["grid","axes","bars","totals","legends","annotations"],pixelRatio:"undefined"!=typeof window&&null!=(v=window.devicePixelRatio)?v:1}),L=function(e,a,t,i,n,r){return u.computeScale(i,{all:e.map(a),min:0,max:0},n,r).padding(t)},w=function(e,a){return e.map((function(e){return h({},a.reduce((function(e,a){return e[a]=null,e}),{}),e)}))},V=function(e){return Object.keys(e).reduce((function(a,t){return e[t]&&(a[t]=e[t]),a}),{})},T=function(e){return[e,Number(e)]},M=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],B=function(e,a){return e>a},W=function(e,a){return e<a},I=function(e,a){return Array.from(" ".repeat(a-e),(function(a,t){return e+t}))},O=function(e){return B(e,0)?0:e},R=function(e,a,t,i){var n=e.data,r=e.formatValue,l=e.getColor,o=e.getIndex,d=e.getTooltipLabel,u=e.innerPadding,s=void 0===u?0:u,c=e.keys,h=e.xScale,f=e.yScale,v=e.margin,b=t?W:B,g=n.map(V),m=[];return c.forEach((function(e,t){return I(0,h.domain().length).forEach((function(u){var c,x,p,y=T(n[u][e]),k=y[0],S=y[1],C=o(n[u]),L=(null!=(c=h(C))?c:0)+a*t+s*t,w=b(x=S,0)?null!=(p=f(x))?p:0:i,V=function(e,a){var t;return b(e,0)?i-a:(null!=(t=f(e))?t:0)-i}(S,w),M={id:e,value:null===k?k:S,formattedValue:r(S),hidden:!1,index:u,indexValue:C,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:L,y:w,absX:v.left+L,absY:v.top+w,width:a,height:V,color:l(M),label:d(M)})}))})),m},j=function(e,a,t,i){var n=e.data,r=e.formatValue,l=e.getIndex,o=e.getColor,d=e.getTooltipLabel,u=e.keys,s=e.innerPadding,c=void 0===s?0:s,h=e.xScale,f=e.yScale,v=e.margin,b=t?W:B,g=n.map(V),m=[];return u.forEach((function(e,t){return I(0,f.domain().length).forEach((function(u){var s,x,p,y=T(n[u][e]),k=y[0],S=y[1],C=l(n[u]),L=b(x=S,0)?i:null!=(p=h(x))?p:0,w=(null!=(s=f(C))?s:0)+a*t+c*t,V=function(e,a){var t;return b(e,0)?(null!=(t=h(e))?t:0)-i:i-a}(S,L),M={id:e,value:null===k?k:S,formattedValue:r(S),hidden:!1,index:u,indexValue:C,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:L,y:w,absX:v.left+L,absY:v.top+w,width:V,height:a,color:o(M),label:d(M)})}))})),m},E=function(e){var a,t,i=e.layout,n=e.minValue,r=e.maxValue,l=e.reverse,o=e.width,d=e.height,s=e.padding,c=void 0===s?0:s,v=e.innerPadding,b=void 0===v?0:v,g=e.valueScale,m=e.indexScale,x=e.hiddenIds,p=void 0===x?[]:x,y=f(e,M),k=y.keys.filter((function(e){return!p.includes(e)})),S=w(y.data,k),C="vertical"===i?["y","x",o]:["x","y",d],V=C[0],T=C[1],B=C[2],W=L(S,y.getIndex,c,m,B,T),I=h({max:r,min:n,reverse:l},g),E="auto"===I.min?O:function(e){return e},P=S.reduce((function(e,a){return[].concat(e,k.map((function(e){return a[e]})))}),[]).filter(Boolean),F=E(Math.min.apply(Math,P)),H=(t=Math.max.apply(Math,P),isFinite(t)?t:0),A=u.computeScale(I,{all:P,min:F,max:H},"x"===V?o:d,V),D="vertical"===i?[W,A]:[A,W],X=D[0],Y=D[1],q=(W.bandwidth()-b*(k.length-1))/k.length,G=[h({},y,{data:S,keys:k,innerPadding:b,xScale:X,yScale:Y}),q,I.reverse,null!=(a=A(0))?a:0];return{xScale:X,yScale:Y,bars:q>0?"vertical"===i?R.apply(void 0,G):j.apply(void 0,G):[]}},P=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],F=function e(a){var t;return a.some(Array.isArray)?e((t=[]).concat.apply(t,a)):a},H=function(e,a,t){var i=e.formatValue,n=e.getColor,r=e.getIndex,l=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return u.domain().forEach((function(d,f){var v,b,g=e[f],m=null!=(v=u(r(g.data)))?v:0,x=(null!=(b=function(e){return s(e[t?0:1])}(g))?b:0)+.5*o,p=function(e,a){var i;return(null!=(i=s(e[t?1:0]))?i:0)-a}(g,x)-o,y=T(g.data[e.key]),k=y[0],S=y[1],C={id:e.key,value:null===k?k:S,formattedValue:i(S),hidden:!1,index:f,indexValue:d,data:V(g.data)};h.push({key:e.key+"."+d,index:h.length,data:C,x:m,y:x,absX:c.left+m,absY:c.top+x,width:a,height:p,color:n(C),label:l(C)})}))})),h},A=function(e,a,t){var i=e.formatValue,n=e.getColor,r=e.getIndex,l=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return s.domain().forEach((function(d,f){var v,b,g=e[f],m=null!=(v=s(r(g.data)))?v:0,x=(null!=(b=function(e){return u(e[t?1:0])}(g))?b:0)+.5*o,p=function(e,a){var i;return(null!=(i=u(e[t?0:1]))?i:0)-a}(g,x)-o,y=T(g.data[e.key]),k=y[0],S=y[1],C={id:e.key,value:null===k?k:S,formattedValue:i(S),hidden:!1,index:f,indexValue:d,data:V(g.data)};h.push({key:e.key+"."+d,index:h.length,data:C,x:x,y:m,absX:c.left+x,absY:c.top+m,width:p,height:a,color:n(C),label:l(C)})}))})),h},D=function(e){var a,t=e.data,i=e.layout,n=e.minValue,r=e.maxValue,l=e.reverse,o=e.width,d=e.height,c=e.padding,v=void 0===c?0:c,b=e.valueScale,g=e.indexScale,m=e.hiddenIds,x=void 0===m?[]:m,p=f(e,P),y=p.keys.filter((function(e){return!x.includes(e)})),k=s.stack().keys(y).offset(s.stackOffsetDiverging)(w(t,y)),S="vertical"===i?["y","x",o]:["x","y",d],C=S[0],V=S[1],T=S[2],M=L(t,p.getIndex,v,g,T,V),B=h({max:r,min:n,reverse:l},b),W=(a=F(k),"log"===b.type?a.filter((function(e){return 0!==e})):a),I=Math.min.apply(Math,W),O=Math.max.apply(Math,W),R=u.computeScale(B,{all:W,min:I,max:O},"x"===C?o:d,C),j="vertical"===i?[M,R]:[R,M],E=j[0],D=j[1],X=p.innerPadding>0?p.innerPadding:0,Y=M.bandwidth(),q=[h({},p,{innerPadding:X,stackedData:k,xScale:E,yScale:D}),Y,B.reverse];return{xScale:E,yScale:D,bars:Y>0?"vertical"===i?H.apply(void 0,q):A.apply(void 0,q):[]}},X=function(e){var t=e.bars,i=e.direction,n=e.from,r=e.groupMode,l=e.layout,o=e.legendLabel,d=e.reverse,u=a.getPropertyAccessor(null!=o?o:"indexes"===n?"indexValue":"id");return"indexes"===n?function(e,a,t){var i=c(e.map((function(e){var a,i;return{id:null!=(a=e.data.indexValue)?a:"",label:t(e.data),hidden:e.data.hidden,color:null!=(i=e.color)?i:"#000"}})),(function(e){return e.id}));return"horizontal"===a&&i.reverse(),i}(t,l,u):function(e,a,t,i,n,r){var l=c(e.map((function(e){var a;return{id:e.data.id,label:r(e.data),hidden:e.data.hidden,color:null!=(a=e.color)?a:"#000"}})),(function(e){return e.id}));return("vertical"===a&&"stacked"===i&&"column"===t&&!0!==n||"horizontal"===a&&"stacked"===i&&!0===n)&&l.reverse(),l}(t,l,i,r,d,u)},Y=function(e,a,t){var i=e.get(a)||0;e.set(a,i+t)},q=function(e,a,t){var i=e.get(a)||0;e.set(a,i+(t>0?t:0))},G=function(e,a,t){var i=e.get(a)||0;e.set(a,Math.max(i,Number(t)))},z=function(e,a){var t=e.get(a)||0;e.set(a,t+1)},N=function(e){var t=e.indexBy,n=void 0===t?k.indexBy:t,r=e.keys,l=void 0===r?k.keys:r,d=e.label,u=void 0===d?k.label:d,s=e.tooltipLabel,c=void 0===s?k.tooltipLabel:s,f=e.valueFormat,v=e.colors,b=void 0===v?k.colors:v,g=e.colorBy,m=void 0===g?k.colorBy:g,x=e.borderColor,p=void 0===x?k.borderColor:x,y=e.labelTextColor,S=void 0===y?k.labelTextColor:y,C=e.groupMode,L=void 0===C?k.groupMode:C,w=e.layout,V=void 0===w?k.layout:w,T=e.reverse,M=void 0===T?k.reverse:T,B=e.data,W=e.minValue,I=void 0===W?k.minValue:W,O=e.maxValue,R=void 0===O?k.maxValue:O,j=e.margin,P=e.width,F=e.height,H=e.padding,A=void 0===H?k.padding:H,N=e.innerPadding,K=void 0===N?k.innerPadding:N,_=e.valueScale,J=void 0===_?k.valueScale:_,Q=e.indexScale,U=void 0===Q?k.indexScale:Q,Z=e.initialHiddenIds,$=void 0===Z?k.initialHiddenIds:Z,ee=e.enableLabel,ae=void 0===ee?k.enableLabel:ee,te=e.labelSkipWidth,ie=void 0===te?k.labelSkipWidth:te,ne=e.labelSkipHeight,re=void 0===ne?k.labelSkipHeight:ne,le=e.legends,oe=void 0===le?k.legends:le,de=e.legendLabel,ue=e.totalsOffset,se=void 0===ue?k.totalsOffset:ue,ce=i.useState(null!=$?$:[]),he=ce[0],fe=ce[1],ve=i.useCallback((function(e){fe((function(a){return a.indexOf(e)>-1?a.filter((function(a){return a!==e})):[].concat(a,[e])}))}),[]),be=a.usePropertyAccessor(n),ge=a.usePropertyAccessor(u),me=a.usePropertyAccessor(c),xe=a.useValueFormatter(f),pe=a.useTheme(),ye=o.useOrdinalColorScale(b,m),ke=o.useInheritedColor(p,pe),Se=o.useInheritedColor(S,pe),Ce=("grouped"===L?E:D)({layout:V,reverse:M,data:B,getIndex:be,keys:l,minValue:I,maxValue:R,width:P,height:F,getColor:ye,padding:A,innerPadding:K,valueScale:J,indexScale:U,hiddenIds:he,formatValue:xe,getTooltipLabel:me,margin:j}),Le=Ce.bars,we=Ce.xScale,Ve=Ce.yScale,Te=i.useMemo((function(){return Le.filter((function(e){return null!==e.data.value})).map((function(e,a){return h({},e,{index:a})}))}),[Le]),Me=i.useCallback((function(e){var a=e.width,t=e.height;return!!ae&&(!(ie>0&&a<ie)&&!(re>0&&t<re))}),[ae,ie,re]),Be=i.useMemo((function(){return l.map((function(e){var a=Le.find((function(a){return a.data.id===e}));return h({},a,{data:h({id:e},null==a?void 0:a.data,{hidden:he.includes(e)})})}))}),[he,l,Le]),We=i.useMemo((function(){return oe.map((function(e){return[e,X({bars:"keys"===e.dataFrom?Be:Le,direction:e.direction,from:e.dataFrom,groupMode:L,layout:V,legendLabel:de,reverse:M})]}))}),[oe,Be,Le,L,V,de,M]),Ie=i.useMemo((function(){return function(e,a,t,i,n,r,l){void 0===i&&(i=k.layout),void 0===n&&(n=k.groupMode);var o=[];if(0===e.length)return o;var d=new Map,u=e[0].width,s=e[0].height;if("stacked"===n){var c=new Map;e.forEach((function(e){var a=e.data,t=a.indexValue,i=a.value;Y(d,t,Number(i)),q(c,t,Number(i))})),c.forEach((function(e,n){var c,h,f,v=d.get(n)||0;"vertical"===i?(c=a(n),h=t(e),f=t(e/2)):(c=a(e),h=t(n),f=a(e/2)),c+="vertical"===i?u/2:r,h+="vertical"===i?-r:s/2,o.push({key:"total_"+n,x:c,y:h,value:v,formattedValue:l(v),animationOffset:f})}))}else if("grouped"===n){var h=new Map,f=new Map;e.forEach((function(e){var a=e.data,t=a.indexValue,i=a.value;Y(d,t,Number(i)),G(h,t,Number(i)),z(f,t)})),h.forEach((function(e,n){var c,h,v,b=d.get(n)||0,g=f.get(n);"vertical"===i?(c=a(n),h=t(e),v=t(e/2)):(c=a(e),h=t(n),v=a(e/2)),c+="vertical"===i?g*u/2:r,h+="vertical"===i?-r:g*s/2,o.push({key:"total_"+n,x:c,y:h,value:b,formattedValue:l(b),animationOffset:v})}))}return o}(Le,we,Ve,V,L,se,xe)}),[Le,we,Ve,V,L,se,xe]);return{bars:Le,barsWithValue:Te,xScale:we,yScale:Ve,getIndex:be,getLabel:ge,getTooltipLabel:me,formatValue:xe,getColor:ye,getBorderColor:ke,getLabelColor:Se,shouldRenderBarLabel:Me,hiddenIds:he,toggleSerie:ve,legendsWithData:We,barTotals:Ie}},K=function(e){var i=e.data,n=e.springConfig,l=e.animate,o=e.layout,d=void 0===o?S.layout:o,u=a.useTheme();return t.useTransition(i,{keys:function(e){return e.key},from:function(e){return{x:"vertical"===d?e.x:e.animationOffset,y:"vertical"===d?e.animationOffset:e.y,labelOpacity:0}},enter:function(e){return{x:e.x,y:e.y,labelOpacity:1}},update:function(e){return{x:e.x,y:e.y,labelOpacity:1}},leave:function(e){return{x:"vertical"===d?e.x:e.animationOffset,y:"vertical"===d?e.animationOffset:e.y,labelOpacity:0}},config:n,immediate:!l,initial:l?void 0:null})((function(e,a){return r.jsx(t.animated.text,{x:e.x,y:e.y,fillOpacity:e.labelOpacity,style:h({},u.labels.text,{pointerEvents:"none",fill:u.text.fill}),fontWeight:"bold",fontSize:u.labels.text.fontSize,fontFamily:u.labels.text.fontFamily,textAnchor:"vertical"===d?"middle":"start",alignmentBaseline:"vertical"===d?"alphabetic":"middle",children:a.formattedValue},a.key)}))},_=["isInteractive","animate","motionConfig","theme","renderWrapper"],J=function(n){var l=n.data,o=n.indexBy,d=n.keys,u=n.margin,s=n.width,c=n.height,f=n.groupMode,v=n.layout,m=n.reverse,x=n.minValue,p=n.maxValue,y=n.valueScale,k=n.indexScale,C=n.padding,L=n.innerPadding,w=n.axisTop,V=n.axisRight,T=n.axisBottom,M=void 0===T?S.axisBottom:T,B=n.axisLeft,W=void 0===B?S.axisLeft:B,I=n.enableGridX,O=void 0===I?S.enableGridX:I,R=n.enableGridY,j=void 0===R?S.enableGridY:R,E=n.gridXValues,P=n.gridYValues,F=n.layers,H=void 0===F?S.layers:F,A=n.barComponent,D=void 0===A?S.barComponent:A,X=n.enableLabel,Y=void 0===X?S.enableLabel:X,q=n.label,G=n.labelSkipWidth,z=void 0===G?S.labelSkipWidth:G,_=n.labelSkipHeight,J=void 0===_?S.labelSkipHeight:_,Q=n.labelTextColor,U=n.markers,Z=void 0===U?S.markers:U,$=n.colorBy,ee=n.colors,ae=n.defs,te=void 0===ae?S.defs:ae,ie=n.fill,ne=void 0===ie?S.fill:ie,re=n.borderRadius,le=void 0===re?S.borderRadius:re,oe=n.borderWidth,de=void 0===oe?S.borderWidth:oe,ue=n.borderColor,se=n.annotations,ce=void 0===se?S.annotations:se,he=n.legendLabel,fe=n.tooltipLabel,ve=n.valueFormat,be=n.isInteractive,ge=void 0===be?S.isInteractive:be,me=n.tooltip,xe=void 0===me?S.tooltip:me,pe=n.onClick,ye=n.onMouseEnter,ke=n.onMouseLeave,Se=n.legends,Ce=n.role,Le=void 0===Ce?S.role:Ce,we=n.ariaLabel,Ve=n.ariaLabelledBy,Te=n.ariaDescribedBy,Me=n.isFocusable,Be=void 0===Me?S.isFocusable:Me,We=n.barAriaLabel,Ie=n.barAriaLabelledBy,Oe=n.barAriaDescribedBy,Re=n.initialHiddenIds,je=n.enableTotals,Ee=void 0===je?S.enableTotals:je,Pe=n.totalsOffset,Fe=void 0===Pe?S.totalsOffset:Pe,He=a.useMotionConfig(),Ae=He.animate,De=He.config,Xe=a.useDimensions(s,c,u),Ye=Xe.outerWidth,qe=Xe.outerHeight,Ge=Xe.margin,ze=Xe.innerWidth,Ne=Xe.innerHeight,Ke=N({indexBy:o,label:q,tooltipLabel:fe,valueFormat:ve,colors:ee,colorBy:$,borderColor:ue,labelTextColor:Q,groupMode:f,layout:v,reverse:m,data:l,keys:d,minValue:x,maxValue:p,margin:Ge,width:ze,height:Ne,padding:C,innerPadding:L,valueScale:y,indexScale:k,enableLabel:Y,labelSkipWidth:z,labelSkipHeight:J,legends:Se,legendLabel:he,initialHiddenIds:Re,totalsOffset:Fe}),_e=Ke.bars,Je=Ke.barsWithValue,Qe=Ke.xScale,Ue=Ke.yScale,Ze=Ke.getLabel,$e=Ke.getTooltipLabel,ea=Ke.getBorderColor,aa=Ke.getLabelColor,ta=Ke.shouldRenderBarLabel,ia=Ke.toggleSerie,na=Ke.legendsWithData,ra=Ke.barTotals,la=t.useTransition(Je,{keys:function(e){return e.key},from:function(e){return h({borderColor:ea(e),color:e.color,height:0,labelColor:aa(e),labelOpacity:0,labelX:e.width/2,labelY:e.height/2,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:{height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},enter:function(e){return{borderColor:ea(e),color:e.color,height:e.height,labelColor:aa(e),labelOpacity:1,labelX:e.width/2,labelY:e.height/2,transform:"translate("+e.x+", "+e.y+")",width:e.width}},update:function(e){return{borderColor:ea(e),color:e.color,height:e.height,labelColor:aa(e),labelOpacity:1,labelX:e.width/2,labelY:e.height/2,transform:"translate("+e.x+", "+e.y+")",width:e.width}},leave:function(e){return h({borderColor:ea(e),color:e.color,height:0,labelColor:aa(e),labelOpacity:0,labelX:e.width/2,labelY:0,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:{labelX:0,labelY:e.height/2,height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},config:De,immediate:!Ae,initial:Ae?void 0:null}),oa=i.useMemo((function(){return{borderRadius:le,borderWidth:de,enableLabel:Y,isInteractive:ge,labelSkipWidth:z,labelSkipHeight:J,onClick:pe,onMouseEnter:ye,onMouseLeave:ke,getTooltipLabel:$e,tooltip:xe,isFocusable:Be,ariaLabel:We,ariaLabelledBy:Ie,ariaDescribedBy:Oe}}),[le,de,Y,$e,ge,J,z,pe,ye,ke,xe,Be,We,Ie,Oe]),da=a.bindDefs(te,_e,ne,{dataKey:"data",targetKey:"data.fill"}),ua={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};H.includes("annotations")&&(ua.annotations=r.jsx(b,{bars:_e,annotations:ce},"annotations")),H.includes("axes")&&(ua.axes=r.jsx(e.Axes,{xScale:Qe,yScale:Ue,width:ze,height:Ne,top:w,right:V,bottom:M,left:W},"axes")),H.includes("bars")&&(ua.bars=r.jsx(i.Fragment,{children:la((function(e,a){return i.createElement(D,h({},oa,{bar:a,style:e,shouldRenderLabel:ta(a),label:Ze(a.data)}))}))},"bars")),H.includes("grid")&&(ua.grid=r.jsx(e.Grid,{width:ze,height:Ne,xScale:O?Qe:null,yScale:j?Ue:null,xValues:E,yValues:P},"grid")),H.includes("legends")&&(ua.legends=r.jsx(g,{width:ze,height:Ne,legends:na,toggleSerie:ia},"legends")),H.includes("markers")&&(ua.markers=r.jsx(a.CartesianMarkers,{markers:Z,width:ze,height:Ne,xScale:Qe,yScale:Ue},"markers")),H.includes("totals")&&Ee&&(ua.totals=r.jsx(K,{data:ra,springConfig:De,animate:Ae,layout:v},"totals"));var sa=i.useMemo((function(){return h({},oa,{margin:Ge,width:s,height:c,innerWidth:ze,innerHeight:Ne,bars:_e,legendData:na,enableLabel:Y,xScale:Qe,yScale:Ue,tooltip:xe,getTooltipLabel:$e,onClick:pe,onMouseEnter:ye,onMouseLeave:ke})}),[oa,Ge,s,c,ze,Ne,_e,na,Y,Qe,Ue,xe,$e,pe,ye,ke]);return r.jsx(a.SvgWrapper,{width:Ye,height:qe,margin:Ge,defs:da,role:Le,ariaLabel:we,ariaLabelledBy:Ve,ariaDescribedBy:Te,isFocusable:Be,children:H.map((function(e,a){var t;return"function"==typeof e?r.jsx(i.Fragment,{children:i.createElement(e,sa)},a):null!=(t=null==ua?void 0:ua[e])?t:null}))})},Q=function(e){var t=e.isInteractive,i=void 0===t?S.isInteractive:t,n=e.animate,l=void 0===n?S.animate:n,o=e.motionConfig,d=void 0===o?S.motionConfig:o,u=e.theme,s=e.renderWrapper,c=f(e,_);return r.jsx(a.Container,{animate:l,isInteractive:i,motionConfig:d,renderWrapper:s,theme:u,children:r.jsx(J,h({isInteractive:i},c))})},U=["isInteractive","renderWrapper","theme"],Z=function(e,t,i,n){return e.find((function(e){return a.isCursorInRect(e.x+t.left,e.y+t.top,e.width,e.height,i,n)}))};var $=function(t){var o=t.data,u=t.indexBy,s=t.keys,c=t.margin,f=t.width,v=t.height,b=t.groupMode,g=t.layout,m=t.reverse,x=t.minValue,p=t.maxValue,y=t.valueScale,k=t.indexScale,S=t.padding,L=t.innerPadding,w=t.axisTop,V=t.axisRight,T=t.axisBottom,M=void 0===T?C.axisBottom:T,B=t.axisLeft,W=void 0===B?C.axisLeft:B,I=t.enableGridX,O=void 0===I?C.enableGridX:I,R=t.enableGridY,j=void 0===R?C.enableGridY:R,E=t.gridXValues,P=t.gridYValues,F=t.layers,H=void 0===F?C.layers:F,A=t.renderBar,D=void 0===A?function(e,a){var t=a.bar,i=t.color,n=t.height,r=t.width,l=t.x,o=t.y,d=a.borderColor,u=a.borderRadius,s=a.borderWidth,c=a.label,h=a.labelColor,f=a.shouldRenderLabel;if(e.fillStyle=i,s>0&&(e.strokeStyle=d,e.lineWidth=s),e.beginPath(),u>0){var v=Math.min(u,n);e.moveTo(l+v,o),e.lineTo(l+r-v,o),e.quadraticCurveTo(l+r,o,l+r,o+v),e.lineTo(l+r,o+n-v),e.quadraticCurveTo(l+r,o+n,l+r-v,o+n),e.lineTo(l+v,o+n),e.quadraticCurveTo(l,o+n,l,o+n-v),e.lineTo(l,o+v),e.quadraticCurveTo(l,o,l+v,o),e.closePath()}else e.rect(l,o,r,n);e.fill(),s>0&&e.stroke(),f&&(e.textBaseline="middle",e.textAlign="center",e.fillStyle=h,e.fillText(c,l+r/2,o+n/2))}:A,X=t.enableLabel,Y=void 0===X?C.enableLabel:X,q=t.label,G=t.labelSkipWidth,z=void 0===G?C.labelSkipWidth:G,K=t.labelSkipHeight,_=void 0===K?C.labelSkipHeight:K,J=t.labelTextColor,Q=t.colorBy,U=t.colors,$=t.borderRadius,ee=void 0===$?C.borderRadius:$,ae=t.borderWidth,te=void 0===ae?C.borderWidth:ae,ie=t.borderColor,ne=t.annotations,re=void 0===ne?C.annotations:ne,le=t.legendLabel,oe=t.tooltipLabel,de=t.valueFormat,ue=t.isInteractive,se=void 0===ue?C.isInteractive:ue,ce=t.tooltip,he=void 0===ce?C.tooltip:ce,fe=t.onClick,ve=t.onMouseEnter,be=t.onMouseLeave,ge=t.legends,me=t.pixelRatio,xe=void 0===me?C.pixelRatio:me,pe=t.canvasRef,ye=t.enableTotals,ke=void 0===ye?C.enableTotals:ye,Se=t.totalsOffset,Ce=void 0===Se?C.totalsOffset:Se,Le=i.useRef(null),we=a.useTheme(),Ve=a.useDimensions(f,v,c),Te=Ve.margin,Me=Ve.innerWidth,Be=Ve.innerHeight,We=Ve.outerWidth,Ie=Ve.outerHeight,Oe=N({indexBy:u,label:q,tooltipLabel:oe,valueFormat:de,colors:U,colorBy:Q,borderColor:ie,labelTextColor:J,groupMode:b,layout:g,reverse:m,data:o,keys:s,minValue:x,maxValue:p,margin:Te,width:Me,height:Be,padding:S,innerPadding:L,valueScale:y,indexScale:k,enableLabel:Y,labelSkipWidth:z,labelSkipHeight:_,legends:ge,legendLabel:le,totalsOffset:Ce}),Re=Oe.bars,je=Oe.barsWithValue,Ee=Oe.xScale,Pe=Oe.yScale,Fe=Oe.getLabel,He=Oe.getTooltipLabel,Ae=Oe.getBorderColor,De=Oe.getLabelColor,Xe=Oe.shouldRenderBarLabel,Ye=Oe.legendsWithData,qe=Oe.barTotals,Ge=d.useTooltip(),ze=Ge.showTooltipFromEvent,Ne=Ge.hideTooltip,Ke=n.useComputedAnnotations({annotations:n.useAnnotations({data:Re,annotations:re,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){var a=e.width,t=e.height;return{width:a,height:t,size:Math.max(a,t)}}})}),_e=i.useMemo((function(){return{borderRadius:ee,borderWidth:te,isInteractive:se,isFocusable:!1,labelSkipWidth:z,labelSkipHeight:_,margin:Te,width:f,height:v,innerWidth:Me,innerHeight:Be,bars:Re,legendData:Ye,enableLabel:Y,xScale:Ee,yScale:Pe,tooltip:he,getTooltipLabel:He,onClick:fe,onMouseEnter:ve,onMouseLeave:be}}),[ee,te,se,z,_,Te,f,v,Me,Be,Re,Ye,Y,Ee,Pe,he,He,fe,ve,be]),Je=a.useValueFormatter(de);i.useEffect((function(){var a,t=null==(a=Le.current)?void 0:a.getContext("2d");Le.current&&t&&(Le.current.width=We*xe,Le.current.height=Ie*xe,t.scale(xe,xe),t.fillStyle=we.background,t.fillRect(0,0,We,Ie),t.translate(Te.left,Te.top),H.forEach((function(a){"grid"===a?"number"==typeof we.grid.line.strokeWidth&&we.grid.line.strokeWidth>0&&(t.lineWidth=we.grid.line.strokeWidth,t.strokeStyle=we.grid.line.stroke,O&&e.renderGridLinesToCanvas(t,{width:Me,height:Be,scale:Ee,axis:"x",values:E}),j&&e.renderGridLinesToCanvas(t,{width:Me,height:Be,scale:Pe,axis:"y",values:P})):"axes"===a?e.renderAxesToCanvas(t,{xScale:Ee,yScale:Pe,width:Me,height:Be,top:w,right:V,bottom:M,left:W,theme:we}):"bars"===a?je.forEach((function(e){D(t,{bar:e,borderColor:Ae(e),borderRadius:ee,borderWidth:te,label:Fe(e.data),labelColor:De(e),shouldRenderLabel:Xe(e)})})):"legends"===a?Ye.forEach((function(e){var a=e[0],i=e[1];l.renderLegendToCanvas(t,h({},a,{data:i,containerWidth:Me,containerHeight:Be,theme:we}))})):"annotations"===a?n.renderAnnotationsToCanvas(t,{annotations:Ke,theme:we}):"totals"===a&&ke?function(e,a,t,i){void 0===i&&(i=C.layout),e.fillStyle=t.text.fill,e.font="bold "+t.labels.text.fontSize+"px "+t.labels.text.fontFamily,e.textBaseline="vertical"===i?"alphabetic":"middle",e.textAlign="vertical"===i?"center":"start",a.forEach((function(a){e.fillText(a.formattedValue,a.x,a.y)}))}(t,qe,we,g):"function"==typeof a&&a(t,_e)})),t.save())}),[M,W,V,w,je,ee,te,Ke,O,j,Ae,Fe,De,E,P,b,v,Be,Me,_e,H,g,Ye,Te.left,Te.top,Ie,We,xe,D,Ee,Pe,m,Xe,we,f,qe,ke,Je]);var Qe=i.useCallback((function(e){if(Re&&Le.current){var t=a.getRelativeCursor(Le.current,e),n=t[0],r=t[1],l=Z(Re,Te,n,r);void 0!==l?(ze(i.createElement(he,h({},l.data,{color:l.color,label:l.label,value:Number(l.data.value)})),e),"mouseenter"===e.type&&(null==ve||ve(l.data,e))):Ne()}}),[Ne,Te,ve,Re,ze,he]),Ue=i.useCallback((function(e){if(Re&&Le.current){Ne();var t=a.getRelativeCursor(Le.current,e),i=t[0],n=t[1],r=Z(Re,Te,i,n);r&&(null==be||be(r.data,e))}}),[Ne,Te,be,Re]),Ze=i.useCallback((function(e){if(Re&&Le.current){var t=a.getRelativeCursor(Le.current,e),i=t[0],n=t[1],r=Z(Re,Te,i,n);void 0!==r&&(null==fe||fe(h({},r.data,{color:r.color}),e))}}),[Te,fe,Re]);return r.jsx("canvas",{ref:function(e){Le.current=e,pe&&"current"in pe&&(pe.current=e)},width:We*xe,height:Ie*xe,style:{width:We,height:Ie,cursor:se?"auto":"normal"},onMouseEnter:se?Qe:void 0,onMouseMove:se?Qe:void 0,onMouseLeave:se?Ue:void 0,onClick:se?Ze:void 0})},ee=i.forwardRef((function(e,t){var i=e.isInteractive,n=e.renderWrapper,l=e.theme,o=f(e,U);return r.jsx(a.Container,{isInteractive:i,renderWrapper:n,theme:l,animate:!1,children:r.jsx($,h({},o,{canvasRef:t}))})})),ae=i.forwardRef((function(e,t){return r.jsx(a.ResponsiveWrapper,{children:function(a){var i=a.width,n=a.height;return r.jsx(ee,h({width:i,height:n},e,{ref:t}))}})}));exports.Bar=Q,exports.BarCanvas=ee,exports.BarItem=x,exports.BarTooltip=y,exports.BarTotals=K,exports.ResponsiveBar=function(e){return r.jsx(a.ResponsiveWrapper,{children:function(a){var t=a.width,i=a.height;return r.jsx(Q,h({width:t,height:i},e))}})},exports.ResponsiveBarCanvas=ae,exports.canvasDefaultProps=C,exports.defaultProps=k,exports.svgDefaultProps=S;
//# sourceMappingURL=nivo-bar.cjs.js.map
