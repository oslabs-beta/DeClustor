import{Axes as e,Grid as t,renderGridLinesToCanvas as a,renderAxesToCanvas as i}from"@nivo/axes";import{useTheme as n,getPropertyAccessor as l,usePropertyAccessor as r,useValueFormatter as o,Container as d,useMotionConfig as u,useDimensions as c,bindDefs as s,CartesianMarkers as h,SvgWrapper as f,getRelativeCursor as b,isCursorInRect as v,ResponsiveWrapper as g}from"@nivo/core";import{animated as m,to as p,useTransition as y}from"@react-spring/web";import{useMemo as x,createElement as S,useCallback as k,useState as w,Fragment as L,forwardRef as C,useRef as V,useEffect as M}from"react";import{useAnnotations as W,Annotation as T,useComputedAnnotations as B,renderAnnotationsToCanvas as I}from"@nivo/annotations";import{jsx as O,Fragment as E,jsxs as R}from"react/jsx-runtime";import{BoxLegendSvg as H,renderLegendToCanvas as P}from"@nivo/legends";import{useOrdinalColorScale as F,useInheritedColor as X}from"@nivo/colors";import{useTooltip as Y,BasicTooltip as D}from"@nivo/tooltip";import{computeScale as A}from"@nivo/scales";import{stack as G,stackOffsetDiverging as z}from"d3-shape";import N from"lodash/uniqBy";function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},j.apply(this,arguments)}function q(e,t){if(null==e)return{};var a,i,n={},l=Object.keys(e);for(i=0;i<l.length;i++)a=l[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}var K,_=function(e){var t=e.bars,a=e.annotations,i=W({data:t,annotations:a,getPosition:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},getDimensions:function(e){var t=e.height,a=e.width;return{width:a,height:t,size:Math.max(a,t)}}});return O(E,{children:i.map((function(e,t){return O(T,j({},e),t)}))})},J=function(e){var t=e.width,a=e.height,i=e.legends,n=e.toggleSerie;return O(E,{children:i.map((function(e,i){var l,r=e[0],o=e[1];return O(H,j({},r,{containerWidth:t,containerHeight:a,data:null!=(l=r.data)?l:o,toggleSerie:r.toggleSerie&&"keys"===r.dataFrom?n:void 0}),i)}))})},Q=["data"],U=function(e){var t,a=e.bar,i=a.data,l=q(a,Q),r=e.style,o=r.borderColor,d=r.color,u=r.height,c=r.labelColor,s=r.labelOpacity,h=r.labelX,f=r.labelY,b=r.transform,v=r.width,g=e.borderRadius,y=e.borderWidth,w=e.label,L=e.shouldRenderLabel,C=e.isInteractive,V=e.onClick,M=e.onMouseEnter,W=e.onMouseLeave,T=e.tooltip,B=e.isFocusable,I=e.ariaLabel,E=e.ariaLabelledBy,H=e.ariaDescribedBy,P=n(),F=Y(),X=F.showTooltipFromEvent,D=F.showTooltipAt,A=F.hideTooltip,G=x((function(){return function(){return S(T,j({},l,i))}}),[T,l,i]),z=k((function(e){null==V||V(j({color:l.color},i),e)}),[l,i,V]),N=k((function(e){return X(G(),e)}),[X,G]),K=k((function(e){null==M||M(i,e),X(G(),e)}),[i,M,X,G]),_=k((function(e){null==W||W(i,e),A()}),[i,A,W]),J=k((function(){D(G(),[l.absX+l.width/2,l.absY])}),[D,G,l]),U=k((function(){A()}),[A]);return R(m.g,{transform:b,children:[O(m.rect,{width:p(v,(function(e){return Math.max(e,0)})),height:p(u,(function(e){return Math.max(e,0)})),rx:g,ry:g,fill:null!=(t=i.fill)?t:d,strokeWidth:y,stroke:o,focusable:B,tabIndex:B?0:void 0,"aria-label":I?I(i):void 0,"aria-labelledby":E?E(i):void 0,"aria-describedby":H?H(i):void 0,onMouseEnter:C?K:void 0,onMouseMove:C?N:void 0,onMouseLeave:C?_:void 0,onClick:C?z:void 0,onFocus:C&&B?J:void 0,onBlur:C&&B?U:void 0}),L&&O(m.text,{x:h,y:f,textAnchor:"middle",dominantBaseline:"central",fillOpacity:s,style:j({},P.labels.text,{pointerEvents:"none",fill:c}),children:w})]})},Z=["color","label"],$=function(e){var t=e.color,a=e.label,i=q(e,Z);return O(D,{id:a,value:i.formattedValue,enableChip:!0,color:t})},ee={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:$,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[],enableTotals:!1,totalsOffset:10},te=j({},ee,{layers:["grid","axes","bars","totals","markers","legends","annotations"],barComponent:U,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),ae=j({},ee,{layers:["grid","axes","bars","totals","legends","annotations"],pixelRatio:"undefined"!=typeof window&&null!=(K=window.devicePixelRatio)?K:1}),ie=function(e,t,a,i,n,l){return A(i,{all:e.map(t),min:0,max:0},n,l).padding(a)},ne=function(e,t){return e.map((function(e){return j({},t.reduce((function(e,t){return e[t]=null,e}),{}),e)}))},le=function(e){return Object.keys(e).reduce((function(t,a){return e[a]&&(t[a]=e[a]),t}),{})},re=function(e){return[e,Number(e)]},oe=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],de=function(e,t){return e>t},ue=function(e,t){return e<t},ce=function(e,t){return Array.from(" ".repeat(t-e),(function(t,a){return e+a}))},se=function(e){return de(e,0)?0:e},he=function(e,t,a,i){var n=e.data,l=e.formatValue,r=e.getColor,o=e.getIndex,d=e.getTooltipLabel,u=e.innerPadding,c=void 0===u?0:u,s=e.keys,h=e.xScale,f=e.yScale,b=e.margin,v=a?ue:de,g=n.map(le),m=[];return s.forEach((function(e,a){return ce(0,h.domain().length).forEach((function(u){var s,p,y,x=re(n[u][e]),S=x[0],k=x[1],w=o(n[u]),L=(null!=(s=h(w))?s:0)+t*a+c*a,C=v(p=k,0)?null!=(y=f(p))?y:0:i,V=function(e,t){var a;return v(e,0)?i-t:(null!=(a=f(e))?a:0)-i}(k,C),M={id:e,value:null===S?S:k,formattedValue:l(k),hidden:!1,index:u,indexValue:w,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:L,y:C,absX:b.left+L,absY:b.top+C,width:t,height:V,color:r(M),label:d(M)})}))})),m},fe=function(e,t,a,i){var n=e.data,l=e.formatValue,r=e.getIndex,o=e.getColor,d=e.getTooltipLabel,u=e.keys,c=e.innerPadding,s=void 0===c?0:c,h=e.xScale,f=e.yScale,b=e.margin,v=a?ue:de,g=n.map(le),m=[];return u.forEach((function(e,a){return ce(0,f.domain().length).forEach((function(u){var c,p,y,x=re(n[u][e]),S=x[0],k=x[1],w=r(n[u]),L=v(p=k,0)?i:null!=(y=h(p))?y:0,C=(null!=(c=f(w))?c:0)+t*a+s*a,V=function(e,t){var a;return v(e,0)?(null!=(a=h(e))?a:0)-i:i-t}(k,L),M={id:e,value:null===S?S:k,formattedValue:l(k),hidden:!1,index:u,indexValue:w,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:L,y:C,absX:b.left+L,absY:b.top+C,width:V,height:t,color:o(M),label:d(M)})}))})),m},be=function(e){var t,a,i=e.layout,n=e.minValue,l=e.maxValue,r=e.reverse,o=e.width,d=e.height,u=e.padding,c=void 0===u?0:u,s=e.innerPadding,h=void 0===s?0:s,f=e.valueScale,b=e.indexScale,v=e.hiddenIds,g=void 0===v?[]:v,m=q(e,oe),p=m.keys.filter((function(e){return!g.includes(e)})),y=ne(m.data,p),x="vertical"===i?["y","x",o]:["x","y",d],S=x[0],k=x[1],w=x[2],L=ie(y,m.getIndex,c,b,w,k),C=j({max:l,min:n,reverse:r},f),V="auto"===C.min?se:function(e){return e},M=y.reduce((function(e,t){return[].concat(e,p.map((function(e){return t[e]})))}),[]).filter(Boolean),W=V(Math.min.apply(Math,M)),T=(a=Math.max.apply(Math,M),isFinite(a)?a:0),B=A(C,{all:M,min:W,max:T},"x"===S?o:d,S),I="vertical"===i?[L,B]:[B,L],O=I[0],E=I[1],R=(L.bandwidth()-h*(p.length-1))/p.length,H=[j({},m,{data:y,keys:p,innerPadding:h,xScale:O,yScale:E}),R,C.reverse,null!=(t=B(0))?t:0];return{xScale:O,yScale:E,bars:R>0?"vertical"===i?he.apply(void 0,H):fe.apply(void 0,H):[]}},ve=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],ge=function e(t){var a;return t.some(Array.isArray)?e((a=[]).concat.apply(a,t)):t},me=function(e,t,a){var i=e.formatValue,n=e.getColor,l=e.getIndex,r=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,c=e.yScale,s=e.margin,h=[];return d.forEach((function(e){return u.domain().forEach((function(d,f){var b,v,g=e[f],m=null!=(b=u(l(g.data)))?b:0,p=(null!=(v=function(e){return c(e[a?0:1])}(g))?v:0)+.5*o,y=function(e,t){var i;return(null!=(i=c(e[a?1:0]))?i:0)-t}(g,p)-o,x=re(g.data[e.key]),S=x[0],k=x[1],w={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:f,indexValue:d,data:le(g.data)};h.push({key:e.key+"."+d,index:h.length,data:w,x:m,y:p,absX:s.left+m,absY:s.top+p,width:t,height:y,color:n(w),label:r(w)})}))})),h},pe=function(e,t,a){var i=e.formatValue,n=e.getColor,l=e.getIndex,r=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,c=e.yScale,s=e.margin,h=[];return d.forEach((function(e){return c.domain().forEach((function(d,f){var b,v,g=e[f],m=null!=(b=c(l(g.data)))?b:0,p=(null!=(v=function(e){return u(e[a?1:0])}(g))?v:0)+.5*o,y=function(e,t){var i;return(null!=(i=u(e[a?0:1]))?i:0)-t}(g,p)-o,x=re(g.data[e.key]),S=x[0],k=x[1],w={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:f,indexValue:d,data:le(g.data)};h.push({key:e.key+"."+d,index:h.length,data:w,x:p,y:m,absX:s.left+p,absY:s.top+m,width:y,height:t,color:n(w),label:r(w)})}))})),h},ye=function(e){var t,a=e.data,i=e.layout,n=e.minValue,l=e.maxValue,r=e.reverse,o=e.width,d=e.height,u=e.padding,c=void 0===u?0:u,s=e.valueScale,h=e.indexScale,f=e.hiddenIds,b=void 0===f?[]:f,v=q(e,ve),g=v.keys.filter((function(e){return!b.includes(e)})),m=G().keys(g).offset(z)(ne(a,g)),p="vertical"===i?["y","x",o]:["x","y",d],y=p[0],x=p[1],S=p[2],k=ie(a,v.getIndex,c,h,S,x),w=j({max:l,min:n,reverse:r},s),L=(t=ge(m),"log"===s.type?t.filter((function(e){return 0!==e})):t),C=Math.min.apply(Math,L),V=Math.max.apply(Math,L),M=A(w,{all:L,min:C,max:V},"x"===y?o:d,y),W="vertical"===i?[k,M]:[M,k],T=W[0],B=W[1],I=v.innerPadding>0?v.innerPadding:0,O=k.bandwidth(),E=[j({},v,{innerPadding:I,stackedData:m,xScale:T,yScale:B}),O,w.reverse];return{xScale:T,yScale:B,bars:O>0?"vertical"===i?me.apply(void 0,E):pe.apply(void 0,E):[]}},xe=function(e){var t=e.bars,a=e.direction,i=e.from,n=e.groupMode,r=e.layout,o=e.legendLabel,d=e.reverse,u=l(null!=o?o:"indexes"===i?"indexValue":"id");return"indexes"===i?function(e,t,a){var i=N(e.map((function(e){var t,i;return{id:null!=(t=e.data.indexValue)?t:"",label:a(e.data),hidden:e.data.hidden,color:null!=(i=e.color)?i:"#000"}})),(function(e){return e.id}));return"horizontal"===t&&i.reverse(),i}(t,r,u):function(e,t,a,i,n,l){var r=N(e.map((function(e){var t;return{id:e.data.id,label:l(e.data),hidden:e.data.hidden,color:null!=(t=e.color)?t:"#000"}})),(function(e){return e.id}));return("vertical"===t&&"stacked"===i&&"column"===a&&!0!==n||"horizontal"===t&&"stacked"===i&&!0===n)&&r.reverse(),r}(t,r,a,n,d,u)},Se=function(e,t,a){var i=e.get(t)||0;e.set(t,i+a)},ke=function(e,t,a){var i=e.get(t)||0;e.set(t,i+(a>0?a:0))},we=function(e,t,a){var i=e.get(t)||0;e.set(t,Math.max(i,Number(a)))},Le=function(e,t){var a=e.get(t)||0;e.set(t,a+1)},Ce=function(e){var t=e.indexBy,a=void 0===t?ee.indexBy:t,i=e.keys,l=void 0===i?ee.keys:i,d=e.label,u=void 0===d?ee.label:d,c=e.tooltipLabel,s=void 0===c?ee.tooltipLabel:c,h=e.valueFormat,f=e.colors,b=void 0===f?ee.colors:f,v=e.colorBy,g=void 0===v?ee.colorBy:v,m=e.borderColor,p=void 0===m?ee.borderColor:m,y=e.labelTextColor,S=void 0===y?ee.labelTextColor:y,L=e.groupMode,C=void 0===L?ee.groupMode:L,V=e.layout,M=void 0===V?ee.layout:V,W=e.reverse,T=void 0===W?ee.reverse:W,B=e.data,I=e.minValue,O=void 0===I?ee.minValue:I,E=e.maxValue,R=void 0===E?ee.maxValue:E,H=e.margin,P=e.width,Y=e.height,D=e.padding,A=void 0===D?ee.padding:D,G=e.innerPadding,z=void 0===G?ee.innerPadding:G,N=e.valueScale,q=void 0===N?ee.valueScale:N,K=e.indexScale,_=void 0===K?ee.indexScale:K,J=e.initialHiddenIds,Q=void 0===J?ee.initialHiddenIds:J,U=e.enableLabel,Z=void 0===U?ee.enableLabel:U,$=e.labelSkipWidth,te=void 0===$?ee.labelSkipWidth:$,ae=e.labelSkipHeight,ie=void 0===ae?ee.labelSkipHeight:ae,ne=e.legends,le=void 0===ne?ee.legends:ne,re=e.legendLabel,oe=e.totalsOffset,de=void 0===oe?ee.totalsOffset:oe,ue=w(null!=Q?Q:[]),ce=ue[0],se=ue[1],he=k((function(e){se((function(t){return t.indexOf(e)>-1?t.filter((function(t){return t!==e})):[].concat(t,[e])}))}),[]),fe=r(a),ve=r(u),ge=r(s),me=o(h),pe=n(),Ce=F(b,g),Ve=X(p,pe),Me=X(S,pe),We=("grouped"===C?be:ye)({layout:M,reverse:T,data:B,getIndex:fe,keys:l,minValue:O,maxValue:R,width:P,height:Y,getColor:Ce,padding:A,innerPadding:z,valueScale:q,indexScale:_,hiddenIds:ce,formatValue:me,getTooltipLabel:ge,margin:H}),Te=We.bars,Be=We.xScale,Ie=We.yScale,Oe=x((function(){return Te.filter((function(e){return null!==e.data.value})).map((function(e,t){return j({},e,{index:t})}))}),[Te]),Ee=k((function(e){var t=e.width,a=e.height;return!!Z&&(!(te>0&&t<te)&&!(ie>0&&a<ie))}),[Z,te,ie]),Re=x((function(){return l.map((function(e){var t=Te.find((function(t){return t.data.id===e}));return j({},t,{data:j({id:e},null==t?void 0:t.data,{hidden:ce.includes(e)})})}))}),[ce,l,Te]),He=x((function(){return le.map((function(e){return[e,xe({bars:"keys"===e.dataFrom?Re:Te,direction:e.direction,from:e.dataFrom,groupMode:C,layout:M,legendLabel:re,reverse:T})]}))}),[le,Re,Te,C,M,re,T]),Pe=x((function(){return function(e,t,a,i,n,l,r){void 0===i&&(i=ee.layout),void 0===n&&(n=ee.groupMode);var o=[];if(0===e.length)return o;var d=new Map,u=e[0].width,c=e[0].height;if("stacked"===n){var s=new Map;e.forEach((function(e){var t=e.data,a=t.indexValue,i=t.value;Se(d,a,Number(i)),ke(s,a,Number(i))})),s.forEach((function(e,n){var s,h,f,b=d.get(n)||0;"vertical"===i?(s=t(n),h=a(e),f=a(e/2)):(s=t(e),h=a(n),f=t(e/2)),s+="vertical"===i?u/2:l,h+="vertical"===i?-l:c/2,o.push({key:"total_"+n,x:s,y:h,value:b,formattedValue:r(b),animationOffset:f})}))}else if("grouped"===n){var h=new Map,f=new Map;e.forEach((function(e){var t=e.data,a=t.indexValue,i=t.value;Se(d,a,Number(i)),we(h,a,Number(i)),Le(f,a)})),h.forEach((function(e,n){var s,h,b,v=d.get(n)||0,g=f.get(n);"vertical"===i?(s=t(n),h=a(e),b=a(e/2)):(s=t(e),h=a(n),b=t(e/2)),s+="vertical"===i?g*u/2:l,h+="vertical"===i?-l:g*c/2,o.push({key:"total_"+n,x:s,y:h,value:v,formattedValue:r(v),animationOffset:b})}))}return o}(Te,Be,Ie,M,C,de,me)}),[Te,Be,Ie,M,C,de,me]);return{bars:Te,barsWithValue:Oe,xScale:Be,yScale:Ie,getIndex:fe,getLabel:ve,getTooltipLabel:ge,formatValue:me,getColor:Ce,getBorderColor:Ve,getLabelColor:Me,shouldRenderBarLabel:Ee,hiddenIds:ce,toggleSerie:he,legendsWithData:He,barTotals:Pe}},Ve=function(e){var t=e.data,a=e.springConfig,i=e.animate,l=e.layout,r=void 0===l?te.layout:l,o=n();return y(t,{keys:function(e){return e.key},from:function(e){return{x:"vertical"===r?e.x:e.animationOffset,y:"vertical"===r?e.animationOffset:e.y,labelOpacity:0}},enter:function(e){return{x:e.x,y:e.y,labelOpacity:1}},update:function(e){return{x:e.x,y:e.y,labelOpacity:1}},leave:function(e){return{x:"vertical"===r?e.x:e.animationOffset,y:"vertical"===r?e.animationOffset:e.y,labelOpacity:0}},config:a,immediate:!i,initial:i?void 0:null})((function(e,t){return O(m.text,{x:e.x,y:e.y,fillOpacity:e.labelOpacity,style:j({},o.labels.text,{pointerEvents:"none",fill:o.text.fill}),fontWeight:"bold",fontSize:o.labels.text.fontSize,fontFamily:o.labels.text.fontFamily,textAnchor:"vertical"===r?"middle":"start",alignmentBaseline:"vertical"===r?"alphabetic":"middle",children:t.formattedValue},t.key)}))},Me=["isInteractive","animate","motionConfig","theme","renderWrapper"],We=function(a){var i=a.data,n=a.indexBy,l=a.keys,r=a.margin,o=a.width,d=a.height,b=a.groupMode,v=a.layout,g=a.reverse,m=a.minValue,p=a.maxValue,k=a.valueScale,w=a.indexScale,C=a.padding,V=a.innerPadding,M=a.axisTop,W=a.axisRight,T=a.axisBottom,B=void 0===T?te.axisBottom:T,I=a.axisLeft,E=void 0===I?te.axisLeft:I,R=a.enableGridX,H=void 0===R?te.enableGridX:R,P=a.enableGridY,F=void 0===P?te.enableGridY:P,X=a.gridXValues,Y=a.gridYValues,D=a.layers,A=void 0===D?te.layers:D,G=a.barComponent,z=void 0===G?te.barComponent:G,N=a.enableLabel,q=void 0===N?te.enableLabel:N,K=a.label,Q=a.labelSkipWidth,U=void 0===Q?te.labelSkipWidth:Q,Z=a.labelSkipHeight,$=void 0===Z?te.labelSkipHeight:Z,ee=a.labelTextColor,ae=a.markers,ie=void 0===ae?te.markers:ae,ne=a.colorBy,le=a.colors,re=a.defs,oe=void 0===re?te.defs:re,de=a.fill,ue=void 0===de?te.fill:de,ce=a.borderRadius,se=void 0===ce?te.borderRadius:ce,he=a.borderWidth,fe=void 0===he?te.borderWidth:he,be=a.borderColor,ve=a.annotations,ge=void 0===ve?te.annotations:ve,me=a.legendLabel,pe=a.tooltipLabel,ye=a.valueFormat,xe=a.isInteractive,Se=void 0===xe?te.isInteractive:xe,ke=a.tooltip,we=void 0===ke?te.tooltip:ke,Le=a.onClick,Me=a.onMouseEnter,We=a.onMouseLeave,Te=a.legends,Be=a.role,Ie=void 0===Be?te.role:Be,Oe=a.ariaLabel,Ee=a.ariaLabelledBy,Re=a.ariaDescribedBy,He=a.isFocusable,Pe=void 0===He?te.isFocusable:He,Fe=a.barAriaLabel,Xe=a.barAriaLabelledBy,Ye=a.barAriaDescribedBy,De=a.initialHiddenIds,Ae=a.enableTotals,Ge=void 0===Ae?te.enableTotals:Ae,ze=a.totalsOffset,Ne=void 0===ze?te.totalsOffset:ze,je=u(),qe=je.animate,Ke=je.config,_e=c(o,d,r),Je=_e.outerWidth,Qe=_e.outerHeight,Ue=_e.margin,Ze=_e.innerWidth,$e=_e.innerHeight,et=Ce({indexBy:n,label:K,tooltipLabel:pe,valueFormat:ye,colors:le,colorBy:ne,borderColor:be,labelTextColor:ee,groupMode:b,layout:v,reverse:g,data:i,keys:l,minValue:m,maxValue:p,margin:Ue,width:Ze,height:$e,padding:C,innerPadding:V,valueScale:k,indexScale:w,enableLabel:q,labelSkipWidth:U,labelSkipHeight:$,legends:Te,legendLabel:me,initialHiddenIds:De,totalsOffset:Ne}),tt=et.bars,at=et.barsWithValue,it=et.xScale,nt=et.yScale,lt=et.getLabel,rt=et.getTooltipLabel,ot=et.getBorderColor,dt=et.getLabelColor,ut=et.shouldRenderBarLabel,ct=et.toggleSerie,st=et.legendsWithData,ht=et.barTotals,ft=y(at,{keys:function(e){return e.key},from:function(e){return j({borderColor:ot(e),color:e.color,height:0,labelColor:dt(e),labelOpacity:0,labelX:e.width/2,labelY:e.height/2,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:{height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},enter:function(e){return{borderColor:ot(e),color:e.color,height:e.height,labelColor:dt(e),labelOpacity:1,labelX:e.width/2,labelY:e.height/2,transform:"translate("+e.x+", "+e.y+")",width:e.width}},update:function(e){return{borderColor:ot(e),color:e.color,height:e.height,labelColor:dt(e),labelOpacity:1,labelX:e.width/2,labelY:e.height/2,transform:"translate("+e.x+", "+e.y+")",width:e.width}},leave:function(e){return j({borderColor:ot(e),color:e.color,height:0,labelColor:dt(e),labelOpacity:0,labelX:e.width/2,labelY:0,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:{labelX:0,labelY:e.height/2,height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},config:Ke,immediate:!qe,initial:qe?void 0:null}),bt=x((function(){return{borderRadius:se,borderWidth:fe,enableLabel:q,isInteractive:Se,labelSkipWidth:U,labelSkipHeight:$,onClick:Le,onMouseEnter:Me,onMouseLeave:We,getTooltipLabel:rt,tooltip:we,isFocusable:Pe,ariaLabel:Fe,ariaLabelledBy:Xe,ariaDescribedBy:Ye}}),[se,fe,q,rt,Se,$,U,Le,Me,We,we,Pe,Fe,Xe,Ye]),vt=s(oe,tt,ue,{dataKey:"data",targetKey:"data.fill"}),gt={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};A.includes("annotations")&&(gt.annotations=O(_,{bars:tt,annotations:ge},"annotations")),A.includes("axes")&&(gt.axes=O(e,{xScale:it,yScale:nt,width:Ze,height:$e,top:M,right:W,bottom:B,left:E},"axes")),A.includes("bars")&&(gt.bars=O(L,{children:ft((function(e,t){return S(z,j({},bt,{bar:t,style:e,shouldRenderLabel:ut(t),label:lt(t.data)}))}))},"bars")),A.includes("grid")&&(gt.grid=O(t,{width:Ze,height:$e,xScale:H?it:null,yScale:F?nt:null,xValues:X,yValues:Y},"grid")),A.includes("legends")&&(gt.legends=O(J,{width:Ze,height:$e,legends:st,toggleSerie:ct},"legends")),A.includes("markers")&&(gt.markers=O(h,{markers:ie,width:Ze,height:$e,xScale:it,yScale:nt},"markers")),A.includes("totals")&&Ge&&(gt.totals=O(Ve,{data:ht,springConfig:Ke,animate:qe,layout:v},"totals"));var mt=x((function(){return j({},bt,{margin:Ue,width:o,height:d,innerWidth:Ze,innerHeight:$e,bars:tt,legendData:st,enableLabel:q,xScale:it,yScale:nt,tooltip:we,getTooltipLabel:rt,onClick:Le,onMouseEnter:Me,onMouseLeave:We})}),[bt,Ue,o,d,Ze,$e,tt,st,q,it,nt,we,rt,Le,Me,We]);return O(f,{width:Je,height:Qe,margin:Ue,defs:vt,role:Ie,ariaLabel:Oe,ariaLabelledBy:Ee,ariaDescribedBy:Re,isFocusable:Pe,children:A.map((function(e,t){var a;return"function"==typeof e?O(L,{children:S(e,mt)},t):null!=(a=null==gt?void 0:gt[e])?a:null}))})},Te=function(e){var t=e.isInteractive,a=void 0===t?te.isInteractive:t,i=e.animate,n=void 0===i?te.animate:i,l=e.motionConfig,r=void 0===l?te.motionConfig:l,o=e.theme,u=e.renderWrapper,c=q(e,Me);return O(d,{animate:n,isInteractive:a,motionConfig:r,renderWrapper:u,theme:o,children:O(We,j({isInteractive:a},c))})},Be=["isInteractive","renderWrapper","theme"],Ie=function(e,t,a,i){return e.find((function(e){return v(e.x+t.left,e.y+t.top,e.width,e.height,a,i)}))};var Oe=function(e){var t=e.data,l=e.indexBy,r=e.keys,d=e.margin,u=e.width,s=e.height,h=e.groupMode,f=e.layout,v=e.reverse,g=e.minValue,m=e.maxValue,p=e.valueScale,y=e.indexScale,w=e.padding,L=e.innerPadding,C=e.axisTop,T=e.axisRight,E=e.axisBottom,R=void 0===E?ae.axisBottom:E,H=e.axisLeft,F=void 0===H?ae.axisLeft:H,X=e.enableGridX,D=void 0===X?ae.enableGridX:X,A=e.enableGridY,G=void 0===A?ae.enableGridY:A,z=e.gridXValues,N=e.gridYValues,q=e.layers,K=void 0===q?ae.layers:q,_=e.renderBar,J=void 0===_?function(e,t){var a=t.bar,i=a.color,n=a.height,l=a.width,r=a.x,o=a.y,d=t.borderColor,u=t.borderRadius,c=t.borderWidth,s=t.label,h=t.labelColor,f=t.shouldRenderLabel;if(e.fillStyle=i,c>0&&(e.strokeStyle=d,e.lineWidth=c),e.beginPath(),u>0){var b=Math.min(u,n);e.moveTo(r+b,o),e.lineTo(r+l-b,o),e.quadraticCurveTo(r+l,o,r+l,o+b),e.lineTo(r+l,o+n-b),e.quadraticCurveTo(r+l,o+n,r+l-b,o+n),e.lineTo(r+b,o+n),e.quadraticCurveTo(r,o+n,r,o+n-b),e.lineTo(r,o+b),e.quadraticCurveTo(r,o,r+b,o),e.closePath()}else e.rect(r,o,l,n);e.fill(),c>0&&e.stroke(),f&&(e.textBaseline="middle",e.textAlign="center",e.fillStyle=h,e.fillText(s,r+l/2,o+n/2))}:_,Q=e.enableLabel,U=void 0===Q?ae.enableLabel:Q,Z=e.label,$=e.labelSkipWidth,ee=void 0===$?ae.labelSkipWidth:$,te=e.labelSkipHeight,ie=void 0===te?ae.labelSkipHeight:te,ne=e.labelTextColor,le=e.colorBy,re=e.colors,oe=e.borderRadius,de=void 0===oe?ae.borderRadius:oe,ue=e.borderWidth,ce=void 0===ue?ae.borderWidth:ue,se=e.borderColor,he=e.annotations,fe=void 0===he?ae.annotations:he,be=e.legendLabel,ve=e.tooltipLabel,ge=e.valueFormat,me=e.isInteractive,pe=void 0===me?ae.isInteractive:me,ye=e.tooltip,xe=void 0===ye?ae.tooltip:ye,Se=e.onClick,ke=e.onMouseEnter,we=e.onMouseLeave,Le=e.legends,Ve=e.pixelRatio,Me=void 0===Ve?ae.pixelRatio:Ve,We=e.canvasRef,Te=e.enableTotals,Be=void 0===Te?ae.enableTotals:Te,Oe=e.totalsOffset,Ee=void 0===Oe?ae.totalsOffset:Oe,Re=V(null),He=n(),Pe=c(u,s,d),Fe=Pe.margin,Xe=Pe.innerWidth,Ye=Pe.innerHeight,De=Pe.outerWidth,Ae=Pe.outerHeight,Ge=Ce({indexBy:l,label:Z,tooltipLabel:ve,valueFormat:ge,colors:re,colorBy:le,borderColor:se,labelTextColor:ne,groupMode:h,layout:f,reverse:v,data:t,keys:r,minValue:g,maxValue:m,margin:Fe,width:Xe,height:Ye,padding:w,innerPadding:L,valueScale:p,indexScale:y,enableLabel:U,labelSkipWidth:ee,labelSkipHeight:ie,legends:Le,legendLabel:be,totalsOffset:Ee}),ze=Ge.bars,Ne=Ge.barsWithValue,je=Ge.xScale,qe=Ge.yScale,Ke=Ge.getLabel,_e=Ge.getTooltipLabel,Je=Ge.getBorderColor,Qe=Ge.getLabelColor,Ue=Ge.shouldRenderBarLabel,Ze=Ge.legendsWithData,$e=Ge.barTotals,et=Y(),tt=et.showTooltipFromEvent,at=et.hideTooltip,it=B({annotations:W({data:ze,annotations:fe,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){var t=e.width,a=e.height;return{width:t,height:a,size:Math.max(t,a)}}})}),nt=x((function(){return{borderRadius:de,borderWidth:ce,isInteractive:pe,isFocusable:!1,labelSkipWidth:ee,labelSkipHeight:ie,margin:Fe,width:u,height:s,innerWidth:Xe,innerHeight:Ye,bars:ze,legendData:Ze,enableLabel:U,xScale:je,yScale:qe,tooltip:xe,getTooltipLabel:_e,onClick:Se,onMouseEnter:ke,onMouseLeave:we}}),[de,ce,pe,ee,ie,Fe,u,s,Xe,Ye,ze,Ze,U,je,qe,xe,_e,Se,ke,we]),lt=o(ge);M((function(){var e,t=null==(e=Re.current)?void 0:e.getContext("2d");Re.current&&t&&(Re.current.width=De*Me,Re.current.height=Ae*Me,t.scale(Me,Me),t.fillStyle=He.background,t.fillRect(0,0,De,Ae),t.translate(Fe.left,Fe.top),K.forEach((function(e){"grid"===e?"number"==typeof He.grid.line.strokeWidth&&He.grid.line.strokeWidth>0&&(t.lineWidth=He.grid.line.strokeWidth,t.strokeStyle=He.grid.line.stroke,D&&a(t,{width:Xe,height:Ye,scale:je,axis:"x",values:z}),G&&a(t,{width:Xe,height:Ye,scale:qe,axis:"y",values:N})):"axes"===e?i(t,{xScale:je,yScale:qe,width:Xe,height:Ye,top:C,right:T,bottom:R,left:F,theme:He}):"bars"===e?Ne.forEach((function(e){J(t,{bar:e,borderColor:Je(e),borderRadius:de,borderWidth:ce,label:Ke(e.data),labelColor:Qe(e),shouldRenderLabel:Ue(e)})})):"legends"===e?Ze.forEach((function(e){var a=e[0],i=e[1];P(t,j({},a,{data:i,containerWidth:Xe,containerHeight:Ye,theme:He}))})):"annotations"===e?I(t,{annotations:it,theme:He}):"totals"===e&&Be?function(e,t,a,i){void 0===i&&(i=ae.layout),e.fillStyle=a.text.fill,e.font="bold "+a.labels.text.fontSize+"px "+a.labels.text.fontFamily,e.textBaseline="vertical"===i?"alphabetic":"middle",e.textAlign="vertical"===i?"center":"start",t.forEach((function(t){e.fillText(t.formattedValue,t.x,t.y)}))}(t,$e,He,f):"function"==typeof e&&e(t,nt)})),t.save())}),[R,F,T,C,Ne,de,ce,it,D,G,Je,Ke,Qe,z,N,h,s,Ye,Xe,nt,K,f,Ze,Fe.left,Fe.top,Ae,De,Me,J,je,qe,v,Ue,He,u,$e,Be,lt]);var rt=k((function(e){if(ze&&Re.current){var t=b(Re.current,e),a=t[0],i=t[1],n=Ie(ze,Fe,a,i);void 0!==n?(tt(S(xe,j({},n.data,{color:n.color,label:n.label,value:Number(n.data.value)})),e),"mouseenter"===e.type&&(null==ke||ke(n.data,e))):at()}}),[at,Fe,ke,ze,tt,xe]),ot=k((function(e){if(ze&&Re.current){at();var t=b(Re.current,e),a=t[0],i=t[1],n=Ie(ze,Fe,a,i);n&&(null==we||we(n.data,e))}}),[at,Fe,we,ze]),dt=k((function(e){if(ze&&Re.current){var t=b(Re.current,e),a=t[0],i=t[1],n=Ie(ze,Fe,a,i);void 0!==n&&(null==Se||Se(j({},n.data,{color:n.color}),e))}}),[Fe,Se,ze]);return O("canvas",{ref:function(e){Re.current=e,We&&"current"in We&&(We.current=e)},width:De*Me,height:Ae*Me,style:{width:De,height:Ae,cursor:pe?"auto":"normal"},onMouseEnter:pe?rt:void 0,onMouseMove:pe?rt:void 0,onMouseLeave:pe?ot:void 0,onClick:pe?dt:void 0})},Ee=C((function(e,t){var a=e.isInteractive,i=e.renderWrapper,n=e.theme,l=q(e,Be);return O(d,{isInteractive:a,renderWrapper:i,theme:n,animate:!1,children:O(Oe,j({},l,{canvasRef:t}))})})),Re=function(e){return O(g,{children:function(t){var a=t.width,i=t.height;return O(Te,j({width:a,height:i},e))}})},He=C((function(e,t){return O(g,{children:function(a){var i=a.width,n=a.height;return O(Ee,j({width:i,height:n},e,{ref:t}))}})}));export{Te as Bar,Ee as BarCanvas,U as BarItem,$ as BarTooltip,Ve as BarTotals,Re as ResponsiveBar,He as ResponsiveBarCanvas,ae as canvasDefaultProps,ee as defaultProps,te as svgDefaultProps};
//# sourceMappingURL=nivo-bar.es.js.map
